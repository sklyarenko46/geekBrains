
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Игра в загадки</title>
	</head>
	<body>
		<script type="text/javascript">
			
			/**
			 Доработать игру в загадки:
			a. Избавиться в игре в загадки от дублирования кода, используя массивы и функции.
			b. Сделать так, чтобы программа поддерживала несколько правильных ответов на один и тот же вопрос. Все возможные варианты задаются программистом в коде программы.
			*/

			var riddles = [
				{question: "Загадка №1. \nЗимой и летом одним цветом?", answers: ["елка", "ёлка", "ель", "еловые", "хвойные"]},
				{question: "Загадка №2. \nСидит дед в сто шуб одет?", answers: ["лук", "капуста", "луковица", "луковка", "качан"]}, 
				{question: "Загадка №3. \nЛучший друг кракадила гены?", answers: ["чебуратор", "чебурашка", "чебурашечка", "чебуразойд"]}
			];

			alert(
				"Вас приветствует игра в загадки. " +
				"В процессе игры вам нужно будет отгадать " + riddles.length + " загадки. " +
				"У вас будет только одна попытка правельно ответить на каждый вопрос." 
			);
			

			var numberOfCorrectUserAnswers = 0;
			var userAnswer;

 			for(let riddle of riddles)
 			{
 				userAnswer = prompt(riddle.question).trim().toLowerCase();
 				document.write("Вопрос: <b>" + riddle.question + "</b>. Ваш ответ: <b>" + userAnswer + "</b>. Допустимые значения(допускаются опечатки): <b>" + riddle.answers + "</b><br>");

 				if(userAnswerIsCorrect(riddle.answers))
				{
					numberOfCorrectUserAnswers++;
					alert("Ответ корректный.");
				}
 				else
 					alert("Вы не угадали.");
 			}	

			document.write("<br><br>Правельных ответов: <b>" + numberOfCorrectUserAnswers +"</b> из <b>" + riddles.length + "</b>. Спасибо за игру!");

		
			function userAnswerIsCorrect(answers) 
			{
			
				for(let variant of answers)
					if(compareAnswers(variant))
						return true;

				return false;
			}
		
			function compareAnswers(variant) 
			{
				let differenceInLength = Math.abs(variant.length - userAnswer.length);
				
				return  userAnswer == variant || (//если две строки равны или
							differenceInLength <= 1 && //имеют небольшую разницу в длине и
							(variant.includes(userAnswer) || userAnswer.includes(variant))//одна из строк включает в себя другую
						);
			}
		
		</script>
	</body>
</html>

